(function(t){function i(i){for(var a,o,c=i[0],l=i[1],r=i[2],d=0,m=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(i);while(m.length)m.shift()();return n.push.apply(n,r||[]),e()}function e(){for(var t,i=0;i<n.length;i++){for(var e=n[i],a=!0,c=1;c<e.length;c++){var l=e[c];0!==s[l]&&(a=!1)}a&&(n.splice(i--,1),t=o(o.s=e[0]))}return t}var a={},s={app:0},n=[];function o(i){if(a[i])return a[i].exports;var e=a[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=a,o.d=function(t,i,e){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,i){if(1&i&&(t=o(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)o.d(e,a,function(i){return t[i]}.bind(null,a));return e},o.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=i,c=c.slice();for(var r=0;r<c.length;r++)i(c[r]);var u=l;n.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("56d7")},"3ce8":function(t,i,e){"use strict";e("5497")},"4b7c":function(t,i,e){},5497:function(t,i,e){},"55b5":function(t,i,e){"use strict";e("9899")},"56d7":function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("2b0e"),s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("AppBar",{attrs:{title:t.title}}),e("BarLeft"),e("router-view")],1)},n=[],o=(e("b0c0"),e("ac1f"),e("5319"),function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"bar"},[e("div",{staticClass:"mdui-appbar mdui-appbar-fixed"},[e("div",{staticClass:"mdui-toolbar mdui-color-indigo"},[e("a",{staticClass:"mdui-btn mdui-btn-icon",attrs:{href:"javascript:;"},on:{click:t.menu}},[e("i",{staticClass:"mdui-icon material-icons"},[t._v("menu")])]),e("a",{staticClass:"mdui-typo-headline",attrs:{href:"javascript:;"}},[t._v("JDC")]),e("a",{staticClass:"mdui-typo-title",attrs:{href:"javascript:;"}},[t._v(t._s(t.title))]),e("div",{staticClass:"mdui-toolbar-spacer"}),t._m(0)])]),e("div",{staticClass:"mdui-dialog",attrs:{id:"assgnment"}},[e("div",{staticClass:"mdui-dialog-content"},[t._v(t._s(t.notice))]),t._m(1)])])}),c=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("a",{staticClass:"mdui-btn mdui-btn-icon",attrs:{href:"javascript:;","mdui-dialog":"{target: '#assgnment'}"}},[e("i",{staticClass:"mdui-icon material-icons"},[t._v("assignment")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-dialog-actions"},[e("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-close":""}},[t._v("了解")])])}],l=e("8ceb"),r=e("bc3a"),u=e.n(r),d=[],m="http://127.0.0.1:5701",h="",p="",f=!1,v=!1;function g(t){this.cid=t,this.cookieStatus=!0,this.loginStatus=!0,localStorage.setItem("cid",t),localStorage.setItem("baseUrl",this.baseUrl),localStorage.setItem("nodeName",this.nodeName)}var _,b,C={urlList:d,baseUrl:m,cid:h,loginStatus:f,cookieStatus:v,loginSuccess:g,nodeName:p},k=C,w=e("2877"),S=Object(w["a"])(k,_,b,!1,null,null,null),y=S.exports,I={name:"AppBar",data:function(){return{baseUrl:"",notice:""}},methods:{menu:function(){var t=new l["a"].Drawer("#drawer");t.toggle()}},mounted:function(){var t=this;""!=localStorage.getItem("baseUrl")&&null!=localStorage.getItem("baseUrl")?this.baseUrl=localStorage.getItem("baseUrl"):this.baseUrl=y.urlList[0].url,u.a.get(this.baseUrl+"/notice").then((function(i){t.notice=i.data.data}))},props:{title:String}},U=I,L=Object(w["a"])(U,o,c,!1,null,"977fadd4",null),N=L.exports,x=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-drawer",attrs:{id:"drawer"}},[e("ul",{staticClass:"mdui-list"},[e("li",{staticClass:"mdui-list-item mdui-ripple"},[e("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons"},[t._v("move_to_inbox")]),e("div",{staticClass:"mdui-list-item-content"},[e("router-link",{attrs:{to:"/"}},[t._v("首页")])],1)]),e("li",{staticClass:"mdui-list-item mdui-ripple"},[e("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons"},[t._v("star")]),e("div",{staticClass:"mdui-list-item-content",on:{click:function(i){return t.goAuthPage("/home")}}},[t._v("个人中心")])]),e("li",{staticClass:"mdui-list-item mdui-ripple"},[e("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons"},[t._v("send")]),e("div",{staticClass:"mdui-list-item-content",on:{click:function(i){return t.goAuthPage("/push")}}},[t._v("消息推送")])])])])},E=[],O={name:"BarLeft",methods:{goAuthPage:function(t){var i=localStorage.getItem("cid");""!=i&&null!=i?this.$router.push(t):l["a"].snackbar("您还未登录！")}}},$=O,j=Object(w["a"])($,x,E,!1,null,null,null),P=j.exports,A={name:"App",data:function(){return{}},computed:{title:function(){return this.$route.name}},components:{AppBar:N,BarLeft:P},created:function(){var t=JSON.parse(Object({NODE_ENV:"production",VUE_APP_CLI_UI_URL:"",BASE_URL:"/"}).VUE_APP_API_URL);t.length<1?l["a"].snackbar("环境变量配置失效！请检查VUE_APP_API_URL设置是否正确！"):y.urlList=t},mounted:function(){document.getElementsByTagName("body")[0].className="mdui-appbar-with-toolbar";var t=localStorage.getItem("cid"),i=localStorage.getItem("baseUrl"),e=localStorage.getItem("nodeName");""!=t&&null!=t?(y.cid=t,y.cookieStatus=!0,y.loginStatus=!0,y.baseUrl=i,y.nodeName=e,"首页"==this.$route.name&&l["a"].snackbar({message:"您已经登录了！是否前往个人中心？",timeout:0,buttonText:"立即前往",onButtonClick:this.goHmoe})):"首页"!=this.$route.name&&this.$router.replace("/")},methods:{goHmoe:function(){this.$router.push({path:"/home"})}}},B=A,q=Object(w["a"])(B,s,n,!1,null,null,null),M=q.exports,D=e("8c4f"),R=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-container"},[e("div",{staticClass:"mdui-row"},[e("div",{staticClass:"mdui-col-xs-12 mdui-col-lg-4 mdui-col-offset-lg-4"},[e("My")],1)])])},Q=[],T=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"my"},[e("div",{staticClass:"mdui-card"},[t._m(0),t._m(1),e("div",{staticClass:"mdui-card-content"},[e("div",{staticClass:"mdui-typo-body-2 item"},[t._v("昵称："),e("div",{staticClass:"mdui-chip"},[t._m(2),e("span",{staticClass:"mdui-chip-title"},[t._v(t._s(t.nick))])])]),e("div",{staticClass:"mdui-typo-body-2 item"},[t._v("状态："),e("div",{staticClass:"mdui-chip"},[e("span",{class:t.nowStatusClass},[e("i",{staticClass:"mdui-icon material-icons"},[t._v("check_circle")])]),e("span",{staticClass:"mdui-chip-title"},[t._v(t._s(t.nowStatusStr))])])]),e("div",{staticClass:"mdui-typo-body-2 item"},[t._v("节点："),e("div",{staticClass:"mdui-chip"},[t._m(3),e("span",{staticClass:"mdui-chip-title"},[t._v(t._s(t.nodeName))])])]),e("div",{staticClass:"mdui-typo-body-2 item"},[t._v("上次检测："+t._s(t.timestamp))])]),e("div",{staticClass:"mdui-card-actions"},[e("button",{staticClass:"mdui-btn mdui-ripple",on:{click:t.logout}},[t._v("退出登录")]),e("button",{staticClass:"mdui-btn mdui-ripple mdui-color-red",on:{click:t.del}},[t._v("删除账号")])])]),e("div",{staticClass:"mdui-dialog",attrs:{id:"delete"}},[e("div",{staticClass:"mdui-dialog-title"},[t._v("删除")]),e("div",{staticClass:"mdui-dialog-content"},[t._v("确认从系统中移除你的cookie吗？")]),e("div",{staticClass:"mdui-dialog-actions"},[e("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-confirm":""},on:{click:t.checkDel}},[t._v("确认")]),e("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-confirm":""}},[t._v("取消")])])])])},J=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-card-primary"},[e("div",{staticClass:"mdui-card-primary-title"},[t._v("个人信息")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-card-media"},[e("img",{staticClass:"image",attrs:{src:"card.webp"}})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"mdui-chip-icon mdui-color-blue"},[e("i",{staticClass:"mdui-icon material-icons"},[t._v("face")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"mdui-chip-icon mdui-color-blue"},[e("i",{staticClass:"mdui-icon material-icons"},[t._v("check_circle")])])}],V={name:"My",data:function(){return{baseUrl:"",nick:"",status:1,nodeName:"",timestamp:"",cid:""}},methods:{getInfo:function(){this.baseUrl=y.baseUrl;var t=this;this.cid=localStorage.getItem("cid"),u.a.post(this.baseUrl+"/checkcookie",{cid:localStorage.getItem("cid")}).then((function(i){t.nick=i.data.data.nickname,t.status=i.data.data.status,t.timestamp=i.data.data.timestamp,t.nodeName=localStorage.getItem("nodeName")})).catch((function(t){l["a"].snackbar("服务器连接失败！"),console.log(t)}))},logout:function(){localStorage.removeItem("cid"),localStorage.removeItem("nodeName"),localStorage.removeItem("baseUrl"),this.$router.replace("/")},del:function(){var t=new l["a"].Dialog("#delete");t.open()},checkDel:function(){var t=this;u.a.post(this.baseUrl+"/delete",{cid:this.cid}).then((function(i){l["a"].snackbar(i.data.data),t.logout()}))}},mounted:function(){this.getInfo()},computed:{nowStatusStr:function(){return 1==this.status?"正常":"已失效"},nowStatusClass:function(){return 1==this.status?["mdui-chip-icon","mdui-color-blue"]:["mdui-chip-icon","mdui-color-red"]}}},H=V,z=(e("8d05"),Object(w["a"])(H,T,J,!1,null,"3ff598fd",null)),F=z.exports,G={name:"Home",components:{My:F}},K=G,W=Object(w["a"])(K,R,Q,!1,null,null,null),X=W.exports,Y=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-container"},[e("div",{staticClass:"mdui-row"},[e("div",{staticClass:"mdui-col-xs-12 mdui-col-lg-4 mdui-col-offset-lg-4"},[e("NodeSelect")],1)]),e("div",{staticClass:"mdui-row"},[e("div",{staticClass:"mdui-col-xs-12 mdui-col-lg-4 mdui-col-offset-lg-4"},[e("QrCode",{attrs:{tip:"请使用京东APP扫码登录"}})],1)]),t._m(0)])},Z=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"row"},[e("div",{staticClass:"mdui-divider hr"})])}],tt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"qrcode"},[e("div",{staticClass:"mdui-card"},[e("div",{staticClass:"mdui-card-primary"},[e("div",{staticClass:"mdui-card-primary-title"},[t._v("扫码登录")]),e("div",{staticClass:"mdui-card-primary-subtitle"},[t._v(t._s(t.tip))]),e("div",{staticClass:"mdui-card-media"},[e("img",{attrs:{src:t.imageBase}})])]),e("div",{staticClass:"mdui-card-actions"},[e("div",{staticStyle:{"padding-bottom":"10px"}},[e("button",{staticClass:"mdui-btn mdui-btn-block mdui-ripple mdui-color-indigo",on:{click:t.getQrCode}},[t._v("生成二维码")])])])])])},it=[],et={name:"QrCode",data:function(){return{imageBase:"",timer:"",msg:"",okl_token:"",cookies:"",token:""}},props:{tip:String},methods:{getQrCode:function(){var t=this;u.a.get(y.baseUrl+"/qrcode").then((function(i){t.imageBase="data:image/jpeg;base64,"+i.data.qrCode,t.okl_token=i.data.okl_token,t.cookies=i.data.cookies,t.token=i.data.token,clearInterval(t.timer),t.timer=setInterval(t.checkReq,2e3)})).catch((function(){l["a"].snackbar("该服务器已离线，请选择其他服务器！")}))},checkReq:function(){var t=this;u.a.post(y.baseUrl+"/check",{okl_token:this.okl_token,cookies:this.cookies,token:this.token}).then((function(i){0==i.data.code?(clearInterval(t.timer),l["a"].snackbar(i.data.data),y.loginSuccess(i.data.cid),t.$router.push({path:"/home"}),t.imageBase=""):400==i.data.code&&(clearInterval(t.timer),l["a"].snackbar(i.data.data))}))}}},at=et,st=(e("3ce8"),Object(w["a"])(at,tt,it,!1,null,"7db9f652",null)),nt=st.exports,ot=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"nodeselect"},[e("div",{staticClass:"mdui-card"},[e("div",{staticClass:"mdui-card-content"},[t._v(" 当前节点："),e("div",{staticClass:"mdui-chip"},[e("i",{class:t.nowStatusClass},[t._v(t._s(t.nowStatusIcon))]),e("span",{staticClass:"mdui-chip-title"},[t._v(t._s(t.nowName))])]),e("div",{staticClass:"mdui-chip"},[e("span",{staticClass:"mdui-chip-title"},[t._v("可用："+t._s(t.nowAllow))])]),t._m(0),e("ul",{staticClass:"mdui-menu",attrs:{id:"select-list"}},t._l(t.nodeList,(function(i,a){return e("li",{key:i.name,staticClass:"mdui-menu-item"},[e("a",{staticClass:"mdui-ripple",on:{click:function(i){return t.changeNode(a)}}},[t._v(t._s(i.name)+"("+t._s(t.checkNodeAllow(a))+")")])])})),0)])])])},ct=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("button",{staticClass:"select-btn mdui-btn mdui-btn-icon mdui-color-indigo mdui-ripple",attrs:{"mdui-menu":"{target: '#select-list',fixed: 'true'}"}},[e("i",{staticClass:"mdui-icon material-icons"},[t._v("edit")])])}],lt={name:"NodeSelect",data:function(){return{nodeList:[],nowId:0}},methods:{changeNode:function(t){this.nowId=t,0!=this.nodeList.length&&(y.baseUrl=this.nodeList[t].url,y.nodeName=this.nodeList[t].name)},checkNodeInfo:function(){var t,i=y.urlList,e=this;for(t=0;t<i.length;t++)u.a.get(i[t].url+"/node_info").then((function(t){if(0==t.data.code){for(var a,s=t.config.url,n=0;n<i.length;n++)i[n].url+"/node_info"==s&&(a=i[n]);var o=t.data.Num;-1==t.data.Num&&(o="99+");var c={name:a.name,url:a.url,allow:o,status:t.data.isAllow};e.nodeList.push(c)}})).catch((function(t){for(var a,s=t.config.url,n=0;n<i.length;n++)i[n].url+"/node_info"==s&&(a=i[n]);var o={name:a.name,url:a.url,allow:0,status:"CLOSE"};e.nodeList.push(o),console.log(a.name+"连接失败！")}))},selectMinNode:function(){for(var t=this.nodeList,i=0,e=0,a=0;a<t;a++)t[a].allow>i&&(e=a);this.changeNode(e)},checkNodeAllow:function(t){return 0!=this.nodeList?"CLOSE"==this.nodeList[t].status?"离线":this.nodeList[t].allow+"可用":"123"}},watch:{nodeList:function(){this.selectMinNode()}},created:function(){this.checkNodeInfo()},computed:{nowName:function(){return 0!=this.nodeList.length?this.nodeList[this.nowId].name:"暂无节点"},nowAllow:function(){return 0!=this.nodeList.length?this.nodeList[this.nowId].allow:0},nowStatusIcon:function(){return 0!=this.nodeList.length?1==this.nodeList[this.nowId].status?"check":0==this.nodeList[this.nowId].status?"stop":"close":"close"},nowStatusClass:function(){return 0!=this.nodeList.length?1==this.nodeList[this.nowId].status?["node-status","mdui-icon material-icons","mdui-text-color-blue"]:0==this.nodeList[this.nowId].status?["node-status","mdui-icon material-icons","mdui-text-color-yellow"]:["node-status","mdui-icon material-icons","mdui-text-color-red"]:["node-status","mdui-icon material-icons","mdui-text-color-red"]}}},rt=lt,ut=(e("55b5"),Object(w["a"])(rt,ot,ct,!1,null,"0585417c",null)),dt=ut.exports,mt={name:"Login",components:{QrCode:nt,NodeSelect:dt}},ht=mt,pt=(e("58e8"),Object(w["a"])(ht,Y,Z,!1,null,"df1f4dc2",null)),ft=pt.exports,vt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mdui-container"},[e("PushCode")],1)},gt=[],_t=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"qrcode"},[e("div",{staticClass:"mdui-card"},[e("div",{staticClass:"mdui-card-primary"},[e("div",{staticClass:"mdui-card-primary-title"},[t._v("消息推送")]),e("div",{staticClass:"mdui-card-primary-subtitle"},[t._v("使用微信扫描二维码订阅消息")]),e("div",{staticClass:"mdui-card-media"},[e("img",{attrs:{src:t.qrUrl}})])])])])},bt=[],Ct={name:"PushCode",data:function(){return{baseUrl:"",qrUrl:""}},created:function(){var t=this;""!=localStorage.getItem("baseUrl")&&null!=localStorage.getItem("baseUrl")?this.baseUrl=localStorage.getItem("baseUrl"):this.baseUrl=y.urlList[0].url,u.a.get(this.baseUrl+"/push_qr").then((function(i){0==i.data.code&&(t.qrUrl=i.data.data)}))}},kt=Ct,wt=(e("6048"),Object(w["a"])(kt,_t,bt,!1,null,"4a01f972",null)),St=wt.exports,yt={name:"Push",components:{PushCode:St}},It=yt,Ut=Object(w["a"])(It,vt,gt,!1,null,null,null),Lt=Ut.exports;a["a"].use(D["a"]);var Nt=[{path:"/",name:"首页",component:ft},{path:"/home",name:"个人中心",component:X},{path:"/push",name:"消息推送",component:Lt}],xt=new D["a"]({routes:Nt}),Et=xt;e("725e");a["a"].config.productionTip=!1,new a["a"]({router:Et,render:function(t){return t(M)}}).$mount("#app")},"58e8":function(t,i,e){"use strict";e("4b7c")},6048:function(t,i,e){"use strict";e("d183")},"8d05":function(t,i,e){"use strict";e("a4c9")},9899:function(t,i,e){},a4c9:function(t,i,e){},d183:function(t,i,e){}});
//# sourceMappingURL=app.3bc51df5.js.map